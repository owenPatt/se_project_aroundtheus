!function(){"use strict";class e{constructor(e,t,s){let{name:i,link:n}=e;this.name=i,this.link=n,this._cardSelector=t,this._handleImageClick=s}_handleLikeBtnClick=()=>{this._likeBtn.classList.toggle("card__like-button_active")};_handleDeleteBtnClick=()=>{this._cardElement.remove()};_setEventListeners(){this._likeBtn.addEventListener("click",this._handleLikeBtnClick),this._deleteBtn.addEventListener("click",this._handleDeleteBtnClick),this._imageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._imageEl=this._cardElement.querySelector(".card__image"),this._titleEl=this._cardElement.querySelector(".card__title"),this._setEventListeners(),this._imageEl.src=this.link,this._imageEl.alt=this.name,this._titleEl.textContent=this.name,this._cardElement}}class t{constructor(e,t){this._config=e,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorMessageClassVisible),t.textContent=e.validationMessage}_hideInputError(e){this._formEl.querySelector(`#${e.id}-error`).classList.remove(this._config.errorMessageClassVisible),e.classList.remove(this._config.inputErrorClass)}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_allInputsValid(){return this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._allInputsValid()?(this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.removeAttribute("disabled")):(this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.setAttribute("disabled",!0))}_setEventListeners(){this._submitButton=this._formEl.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._inputEls=[...this._formEl.querySelectorAll(this._config.inputSelector)],this._setEventListeners()}setButtonState(){this._toggleButtonState()}clearValidationErrors(){this._inputEls.forEach((e=>{this._hideInputError(e)}))}}const s={formSelector:".modal__form",inputSelector:".modal__item",submitButtonSelector:".modal__button",errorMessageClass:"modal__error",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__item_type_error",errorMessageClassVisible:"modal__error_visible"};class i{constructor(e){this._popupEl=document.querySelector(e)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};open(){this._popupEl.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupEl.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupEl.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class n extends i{constructor(e,t){super(e),this._handleSubmitForm=t,this._formEl=this._popupEl.querySelector(".modal__form"),this._inputEls=Array.from(this._popupEl.querySelectorAll(".modal__item"))}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._formEl.addEventListener("submit",(e=>{this._handleSubmitForm(e,this._getInputValues())}))}close(){super.close(),this._formEl.reset()}}const o=document.querySelector("#profile"),r=o.querySelector("#profile-edit-button"),l=o.querySelector("#profile-title"),a=o.querySelector("#profile-description"),c=document.querySelector("#profile-edit-modal"),u=(c.querySelector("#profile-modal-name-input"),c.querySelector("#profile-modal-description-input"),document.querySelector("#add-card-button")),d=new t(s,document.forms["profile-modal-form"]),_=new t(s,document.forms["card-modal-form"]);d.enableValidation(),_.enableValidation();const m=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.insertAdjacentElement("afterbegin",e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Largo di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:S},".cards__list"),h=new n("#profile-edit-modal",(function(e,t){let{title:s,description:i}=t;e.preventDefault(),f.setUserInfo(s,i),h.close()})),p=new n("#card-add-modal",(function(e,t){e.preventDefault(),m.addItem(S(t)),p.close()})),E=new class extends i{constructor(e){super(e),this._pictureEl=this._popupEl.querySelector(".modal__image"),this._captionEl=this._popupEl.querySelector(".modal__title")}open(e,t){this._pictureEl.src=e,this._pictureEl.alt=t,this._captionEl.innerText=t,super.open()}}("#picture-modal");h.setEventListeners(),p.setEventListeners(),E.setEventListeners();const f=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s),this._formNameInput=document.querySelector("#profile-modal-name-input"),this._formDescriptionInput=document.querySelector("#profile-modal-description-input"),this._name=this._nameEl.textContent,this._job=this._jobEl.textContent}_setPage(){this._jobEl.textContent=this._job,this._nameEl.textContent=this._name,this._formNameInput.value=this._name,this._formDescriptionInput.value=this._job}getUserInfo(){return{name:this._name,job:this._job}}setUserInfo(e,t){this._name=e,this._job=t,this._setPage()}}({nameSelector:"#profile-title",jobSelector:"#profile-description"});function g(e){E.open(e.link,e.name)}function S(t){return new e(t,"#card-template",g).getView()}r.addEventListener("click",(()=>{f.setUserInfo(l.textContent,a.textContent),d.setButtonState(),d.clearValidationErrors(),h.open()})),u.addEventListener("click",(()=>{_.setButtonState(),_.clearValidationErrors(),p.open()})),m.renderItems(),document.querySelector("body").classList.remove("no-transition")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxJQUVyQm9CLEVBQVc1RSxpQkFBaUIsU0FBUyxLQUNuQytFLEVBQXVCbEMsaUJBQ3ZCa0MsRUFBdUJqQyx3QkFDdkJvRCxFQUFhMUMsTUFBTSxJQU1yQndCLEVBQVlPLGNBS1puRixTQUFTQyxjQUFjLFFBQVFYLFVBQVVJLE9BQU8sZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnRuQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9O1xuXG4gIF9oYW5kbGVEZWxldGVCdG5DbGljayA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9BZGRzIGxpc3RlbmVyc1xuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdG5DbGljayk7XG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayk7XG4gICAgdGhpcy5faW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgLy9jbG9uZXMgdGVtcFxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIC8vR3JhYiBhbGwgZWxlbWVudHNcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgdGhpcy5faW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fdGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG5cbiAgICAvL1NldHMgTGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vU2V0cyBjYXJkIHZhbHVlc1xuICAgIHRoaXMuX2ltYWdlRWwuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuX2ltYWdlRWwuYWx0ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX3RpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsIi8vXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvck1lc3NhZ2VDbGFzc1Zpc2libGUpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvck1lc3NhZ2VDbGFzc1Zpc2libGUpO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfYWxsSW5wdXRzVmFsaWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9hbGxJbnB1dHNWYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblN0YXRlKCkge1xyXG4gICAgLy9EaXNhYmxlIFN0YXRlIG9mIGJ1dHRvblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGNsZWFyVmFsaWRhdGlvbkVycm9ycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy9cclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFyZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdG9yQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faXRlbVwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgZXJyb3JNZXNzYWdlQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pdGVtX3R5cGVfZXJyb3JcIixcclxuICBlcnJvck1lc3NhZ2VDbGFzc1Zpc2libGU6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdG9yQ29uZmlnIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgLy9BbGxvd3MgdGhlIG92ZXJsYXkgYW5kIGNsb3NlIGJ1dHRvbiB0byBjbG9zZSB0aGUgbW9kYWxcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xuICAgIHRoaXMuX2Zvcm1FbCA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pdGVtXCIpKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHZhbHVlc1tpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKGUsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWwucmVzZXQoKTtcbiAgfVxufVxuIiwiLy9cblxuLy9DU1NcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vSmF2YXNjcmlwdFxuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRvckNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8qKioqKioqKioqKipcbiAqIEVMRU1FTlRTICpcbiAqKioqKioqKioqKiovXG4vL1Byb2ZpbGUgZWxlbWVudHNcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVcIik7XG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKTtcblxuLy9wcm9maWxlIG1vZGFsIGVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlTW9kYWxOYW1lSW5wdXQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtbW9kYWwtbmFtZS1pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1tb2RhbC1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG4vL2NhcmQgZWxlbWVudHNcbmNvbnN0IGFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcblxuLyoqKioqKioqKioqKioqKioqKlxuICogRk9STSBWQUxJREFUT1JTICpcbiAqKioqKioqKioqKioqKioqKiovXG5jb25zdCBwcm9maWxlTW9kYWxGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRvckNvbmZpZyxcbiAgZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLW1vZGFsLWZvcm1cIl1cbik7XG5jb25zdCBjYXJkTW9kYWxGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRvckNvbmZpZyxcbiAgZG9jdW1lbnQuZm9ybXNbXCJjYXJkLW1vZGFsLWZvcm1cIl1cbik7XG5cbnByb2ZpbGVNb2RhbEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZE1vZGFsRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qKioqKioqKioqKipcbiAqIFNFQ1RJT05TICpcbiAqKioqKioqKioqKiovXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiBjcmVhdGVOZXdDYXJkRWwgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuLyoqKioqKioqKipcbiAqIFBPUFVQUyAqXG4gKioqKioqKioqKi9cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2FyZC1hZGQtbW9kYWxcIixcbiAgaGFuZGxlQWRkQ2FyZE1vZGFsU3VibWl0XG4pO1xuY29uc3QgcGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtbW9kYWxcIik7XG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5waWN0dXJlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyoqKioqKioqKioqKlxuICogVVNFUklORk8gKlxuICoqKioqKioqKioqKi9cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqXG4gKiBFVkVOVCBIQU5ETEVSUyAqXG4gKioqKioqKioqKioqKioqKioqL1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZSwgeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHRpdGxlLCBkZXNjcmlwdGlvbik7XG4gIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkTW9kYWxTdWJtaXQoZSwgY2FyZERhdGEpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZU5ld0NhcmRFbChjYXJkRGF0YSkpO1xuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGNhcmRPYmplY3QpIHtcbiAgcGljdHVyZVBvcHVwLm9wZW4oY2FyZE9iamVjdC5saW5rLCBjYXJkT2JqZWN0Lm5hbWUpO1xufVxuXG4vKioqKioqKioqKioqKlxuICogRlVOQ1RJT05TICpcbiAqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBjcmVhdGVOZXdDYXJkRWwoY2FyZERhdGEpIHtcbiAgLy9DcmVhdGVzIG5ldyBjYXJkIE9iamVjdCBhbmQgdGhlbiByZXR1cm5zIGl0cyBlbGVtZW50XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oXG4gICAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50LFxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudFxuICApO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKlxuICogRVZFTlQgTElTVEVORVJTICpcbiAqKioqKioqKioqKioqKioqKioqL1xuLy9PcGVuIE1vZGFsc1xucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIHByb2ZpbGVNb2RhbEZvcm1WYWxpZGF0b3Iuc2V0QnV0dG9uU3RhdGUoKTtcbiAgcHJvZmlsZU1vZGFsRm9ybVZhbGlkYXRvci5jbGVhclZhbGlkYXRpb25FcnJvcnMoKTtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkTW9kYWxGb3JtVmFsaWRhdG9yLnNldEJ1dHRvblN0YXRlKCk7XG4gIGNhcmRNb2RhbEZvcm1WYWxpZGF0b3IuY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLyoqKioqKioqKioqKioqKioqKioqKipcbiAqIFNFVFMgSU5JVElBTCBDQVJEUyAqXG4gKioqKioqKioqKioqKioqKioqKioqKi9cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKlxuICogRU5BQkxFUyBUUkFOU0lUSU9OUyAqXG4gKioqKioqKioqKioqKioqKioqKioqKiovXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwibm8tdHJhbnNpdGlvblwiKTtcbiIsIi8vTmVlZCB0byBjcmVhdGUgdGhlIHJlbmRlcmVyIGZ1bmN0aW9uXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICAvL3JlbmRlcnMgYWxsIGVsZW1lbnRzIG9uIHRoZSBzY3JlZW5cbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAvL3JlbmRlcmVyIHJlbmRlcnMgZWFjaCBpbmRpdmlkdWFsIGVsZW1lbnRcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAvL0FkZHMgaXQgdG8gdGhlIGNvbnRhaW5lclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9waWN0dXJlRWwgPSB0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcHRpb25FbCA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKGltYWdlU3JjLCBuYW1lKSB7XG4gICAgdGhpcy5fcGljdHVyZUVsLnNyYyA9IGltYWdlU3JjO1xuICAgIHRoaXMuX3BpY3R1cmVFbC5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2NhcHRpb25FbC5pbm5lclRleHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm1OYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbW9kYWwtbmFtZS1pbnB1dFwiKTtcbiAgICB0aGlzLl9mb3JtRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNwcm9maWxlLW1vZGFsLWRlc2NyaXB0aW9uLWlucHV0XCJcbiAgICApO1xuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fam9iID0gdGhpcy5fam9iRWwudGV4dENvbnRlbnQ7XG4gIH1cblxuICBfc2V0UGFnZSgpIHtcbiAgICB0aGlzLl9qb2JFbC50ZXh0Q29udGVudCA9IHRoaXMuX2pvYjtcbiAgICB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2Zvcm1OYW1lSW5wdXQudmFsdWUgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2Zvcm1EZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdGhpcy5fam9iO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZSwgam9iOiB0aGlzLl9qb2IgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2pvYiA9IGpvYjtcbiAgICB0aGlzLl9zZXRQYWdlKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQnRuQ2xpY2siLCJfbGlrZUJ0biIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9oYW5kbGVEZWxldGVCdG5DbGljayIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnRuIiwiX2ltYWdlRWwiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX3RpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWwiLCJfY29uZmlnIiwiX2Zvcm1FbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JNZXNzYWdlQ2xhc3NWaXNpYmxlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfYWxsSW5wdXRzVmFsaWQiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic2V0QnV0dG9uU3RhdGUiLCJjbGVhclZhbGlkYXRpb25FcnJvcnMiLCJ2YWxpZGF0b3JDb25maWciLCJmb3JtU2VsZWN0b3IiLCJlcnJvck1lc3NhZ2VDbGFzcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsIiwiX2hhbmRsZUVzY0Nsb3NlIiwia2V5IiwiY2xvc2UiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJBcnJheSIsImZyb20iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZSIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUVkaXRNb2RhbCIsImFkZENhcmRCdG4iLCJwcm9maWxlTW9kYWxGb3JtVmFsaWRhdG9yIiwiZm9ybXMiLCJjYXJkTW9kYWxGb3JtVmFsaWRhdG9yIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJjcmVhdGVOZXdDYXJkRWwiLCJwcm9maWxlUG9wdXAiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFkZENhcmRQb3B1cCIsImNhcmREYXRhIiwicGljdHVyZVBvcHVwIiwiX3BpY3R1cmVFbCIsIl9jYXB0aW9uRWwiLCJpbWFnZVNyYyIsImlubmVyVGV4dCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbCIsIl9qb2JFbCIsIl9mb3JtTmFtZUlucHV0IiwiX2Zvcm1EZXNjcmlwdGlvbklucHV0IiwiX25hbWUiLCJfam9iIiwiX3NldFBhZ2UiLCJnZXRVc2VySW5mbyIsImpvYiIsImhhbmRsZUNhcmRDbGljayIsImNhcmRPYmplY3QiXSwic291cmNlUm9vdCI6IiJ9