!function(){"use strict";class t{constructor(t,e,s,i,r){let{name:n,link:a,_id:o,isLiked:l}=t;this.name=n,this.link=a,this.id=o,this._initialState=l,this._cardSelector=e,this._handleImageClick=s,this._handleDeleteBtnClick=i,this._handleLikeBtnClick=r}setLikeBtnState=()=>{this._likeBtn.classList.toggle("card__like-button_active")};isLiked=()=>this._likeBtn.classList.contains("card__like-button_active");handleDelete=()=>{this._cardElement.remove(),this._cardElement=null};_setEventListeners(){this._likeBtn.addEventListener("click",(()=>{this._handleLikeBtnClick(this)})),this._deleteBtn.addEventListener("click",(()=>{this._handleDeleteBtnClick(this)})),this._imageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._imageEl=this._cardElement.querySelector(".card__image"),this._titleEl=this._cardElement.querySelector(".card__title"),this._setEventListeners(),this._imageEl.src=this.link,this._imageEl.alt=this.name,this._titleEl.textContent=this.name,this._initialState&&this.setLikeBtnState(),this._cardElement}}class e{constructor(t,e){this._config=t,this._formEl=e}_showInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.add(this._config.inputErrorClass),e.classList.add(this._config.errorMessageClassVisible),e.textContent=t.validationMessage}_hideInputError(t){this._formEl.querySelector(`#${t.id}-error`).classList.remove(this._config.errorMessageClassVisible),t.classList.remove(this._config.inputErrorClass)}_checkValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_allInputsValid(){return this._inputEls.every((t=>t.validity.valid))}_toggleButtonState(){this._allInputsValid()?(this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.removeAttribute("disabled")):(this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.setAttribute("disabled",!0))}_setEventListeners(){this._submitButton=this._formEl.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach((t=>{t.addEventListener("input",(e=>{this._checkValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(t=>{t.preventDefault()})),this._inputEls=[...this._formEl.querySelectorAll(this._config.inputSelector)],this._setEventListeners()}setButtonState(){this._toggleButtonState()}clearValidationErrors(){this._inputEls.forEach((t=>{this._hideInputError(t)}))}}class s{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this.addItem(this._renderer(t))}))}addItem(t){this._container.insertAdjacentElement("afterbegin",t)}}class i{constructor(t){this._popupEl=document.querySelector(t)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};open(){this._popupEl.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupEl.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupEl.addEventListener("mousedown",(t=>{(t.target.classList.contains("modal_opened")||t.target.classList.contains("modal__close"))&&this.close()}))}}class r extends i{constructor(t,e){super(t),this._handleSubmitForm=e,this._formEl=this._popupEl.querySelector(".modal__form"),this._inputEls=Array.from(this._popupEl.querySelectorAll(".modal__item")),this._submitBtn=this._popupEl.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const t={};return this._inputEls.forEach((e=>{t[e.name]=e.value})),t}renderLoading(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=t?e:this._submitBtnText}setEventListeners(){super.setEventListeners(),this._formEl.addEventListener("submit",(t=>{this._handleSubmitForm(t,this._getInputValues())}))}setInputValues(t){this._inputEls.forEach((e=>{e.value=t[e.name]}))}close(){super.close(),this._formEl.reset()}}const n=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar"),o=document.querySelector("#add-card-button"),l={},{profileFormName:c,avatarFormName:d,cardFormName:h}={profileFormName:"profile-modal-form",addCardFormName:"card-add-modal-form",avatarFormName:"avatar-modal-form"};var _;_={formSelector:".modal__form",inputSelector:".modal__item",submitButtonSelector:".modal__button",errorMessageClass:"modal__error",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__item_type_error",errorMessageClassVisible:"modal__error_visible"},Array.from(document.querySelectorAll(_.formSelector)).forEach((t=>{const s=new e(_,t),i=t.getAttribute("name");l[i]=s,s.enableValidation()}));const u=new class{constructor(t){this._baseUrl=t.baseUrl,this._headers=t.headers}_checkResponse(t){return t.ok?t.json():Promise.reject(`Error: ${t.status}`)}_request(t,e,s){return fetch(t,{method:e,headers:this._headers,body:JSON.stringify(s)}).then(this._checkResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,"GET").then((t=>t))}getCurrentUser(){return this._request(`${this._baseUrl}/users/me`,"GET").then((t=>t))}updateUser(t,e){return this._request(`${this._baseUrl}/users/me`,"PATCH",{name:t,about:e}).then((t=>{console.log(t)}))}updateAvatar(t){return this._request(`${this._baseUrl}/users/me/avatar`,"PATCH",{avatar:t}).then((t=>{console.log(t)}))}createCard(t,e){return this._request(`${this._baseUrl}/cards`,"POST",{name:t,link:e})}deleteCard(t){return this._request(`${this._baseUrl}/cards/${t}`,"DELETE").then((t=>{console.log(t)}))}likeCard(t){return this._request(`${this._baseUrl}/cards/${t}/likes`,"PUT").then((t=>{console.log(t)}))}dislikeCard(t){return this._request(`${this._baseUrl}/cards/${t}/likes`,"DELETE").then((t=>{console.log(t)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c2b0fb8f-5e2c-45d3-9e40-bbe48905b446","content-type":"application/json"}});let m;u.getInitialCards().then((t=>{m=new s({items:t,renderer:y},".cards__list"),m.renderItems()})).catch(B);const p=new r("#profile-edit-modal",(function(t,e){let{name:s,description:i}=e;t.preventDefault(),S((function(){return u.updateUser(s,i).then((()=>{b.setUserInfo(s,i)}))}),p)})),E=new r("#card-add-modal",(function(t,e){t.preventDefault(),S((function(){return u.createCard(e.name,e.link).then((t=>{e._id=t._id,m.addItem(y(e))}))}),E)})),v=new r("#avatar-modal",(function(t,e){let{link:s}=e;t.preventDefault(),S((function(){return u.updateAvatar(s).then((()=>{b.setAvatar(s)}))}),v)})),f=new class extends i{constructor(t){super(t),this._pictureEl=this._popupEl.querySelector(".modal__image"),this._captionEl=this._popupEl.querySelector(".modal__title")}open(t,e){this._pictureEl.src=t,this._pictureEl.alt=e,this._captionEl.innerText=e,super.open()}}("#picture-modal"),g=new class extends i{constructor(t,e){super(t),this._handleButtonClick=e,this._button=this._popupEl.querySelector(".modal__button")}setEventListeners(){super.setEventListeners(),this._button.addEventListener("click",(()=>{this._handleButtonClick(this._calledEl)}))}open(t){super.open(),this._calledEl=t}close(){super.close(),this._calledEl=null}}("#card-delete-modal",(function(t){u.deleteCard(t.id).then((()=>{t.handleDelete(),g.close()})).catch(B)}));p.setEventListeners(),E.setEventListeners(),v.setEventListeners(),f.setEventListeners(),g.setEventListeners();const b=new class{constructor(t){let{nameSelector:e,descriptionSelector:s,avatarSelector:i}=t;this._nameEl=document.querySelector(e),this._descriptionEl=document.querySelector(s),this._avatarEl=document.querySelector(i),this._name=this._nameEl.textContent,this._description=this._descriptionEl.textContent,this._avatar=this._avatarEl.src}_setPage(){this._descriptionEl.textContent=this._description,this._nameEl.textContent=this._name,this._avatarEl.src=this._avatar}getUserInfo(){return{name:this._name,description:this._description}}setUserInfo(t,e){this._name=t,this._description=e,this._setPage()}setAvatar(t){this._avatar=t,this._setPage()}}({nameSelector:"#profile-title",descriptionSelector:"#profile-description",avatarSelector:"#profile-image"});function S(t,e){e.renderLoading(!0),t().then((()=>{e.close()})).catch(B).finally((()=>{e.renderLoading(!1)}))}function L(t){f.open(t.link,t.name)}function k(t){g.open(t)}function C(t){t.isLiked()?u.dislikeCard(t.id).then((()=>{t.setLikeBtnState()})).catch(B):u.likeCard(t.id).then((()=>{t.setLikeBtnState()})).catch(B)}function y(e){return new t(e,"#card-template",L,k,C).getView()}function B(t){console.log(t)}u.getCurrentUser().then((t=>{b.setUserInfo(t.name,t.about),b.setAvatar(t.avatar)})).catch(B),n.addEventListener("click",(()=>{p.setInputValues(b.getUserInfo()),l[c].setButtonState(),l[c].clearValidationErrors(),p.open()})),o.addEventListener("click",(()=>{l[h].setButtonState(),l[h].clearValidationErrors(),E.open()})),a.addEventListener("click",(()=>{l[d].setButtonState(),l[d].clearValidationErrors(),v.open()})),document.querySelector("body").classList.remove("no-transition")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNKMEMsRUFBVTdLLGlCQUFpQixJQUU1QnNKLE1BQU1DLEdBWlR4QyxFQUNHa0MsU0FBUzRCLEVBQVVuTCxJQUNuQnlJLE1BQUssS0FDSjBDLEVBQVU3SyxpQkFBaUIsSUFFNUJzSixNQUFNQyxFQVNiLENBS0EsU0FBU0YsRUFBZ0JTLEdBU3ZCLE9BUGEsSUFBSWhMLEVBQ2ZnTCxFQUNBLGlCQUNBOEIsRUFDQXpNLEVBQ0FDLEdBRVV3QixTQUNkLENBTUEsU0FBUzJJLEVBQWdCdUMsR0FDdkJyRCxRQUFRQyxJQUFJb0QsRUFDZCxDQWxIQS9FLEVBQ0d1QixpQkFDQUgsTUFBTUUsSUFDTHNCLEVBQVNDLFlBQVl2QixFQUFPaEosS0FBTWdKLEVBQU9HLE9BQ3pDbUIsRUFBU00sVUFBVTVCLEVBQU9RLE9BQU8sSUFFbENTLE1BQU1DLEdBa0hUdEQsRUFBZXhGLGlCQUFpQixTQUFTLEtBWHZDK0ksRUFBYTFELGVBQWU2RCxFQUFTNkIsZUFhckNwRixFQUFlQyxHQUFpQmhELGlCQUNoQytDLEVBQWVDLEdBQWlCL0Msd0JBQ2hDa0csRUFBYS9FLE1BQU0sSUFFckIwQixFQUFXMUYsaUJBQWlCLFNBQVMsS0FDbkMyRixFQUFlRyxHQUFjbEQsaUJBQzdCK0MsRUFBZUcsR0FBY2pELHdCQUM3QnVHLEVBQWFwRixNQUFNLElBRXJCeUIsRUFBY3pGLGlCQUFpQixTQUFTLEtBQ3RDMkYsRUFBZUUsR0FBZ0JqRCxpQkFDL0IrQyxFQUFlRSxHQUFnQmhELHdCQUMvQnlHLEVBQVl0RixNQUFNLElBTXBCNUQsU0FBU0MsY0FBYyxRQUFRWixVQUFVSyxPQUFPLGdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUJ0bkNsaWNrLFxuICAgIGhhbmRsZUxpa2VCdG5DbGlja1xuICApIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5pZCA9IF9pZDtcbiAgICB0aGlzLl9pbml0aWFsU3RhdGUgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayA9IGhhbmRsZURlbGV0ZUJ0bkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdG5DbGljayA9IGhhbmRsZUxpa2VCdG5DbGljaztcbiAgfVxuXG4gIHNldExpa2VCdG5TdGF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG5cbiAgaXNMaWtlZCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG5cbiAgaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9BZGRzIGxpc3RlbmVyc1xuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdG5DbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bkNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIC8vY2xvbmVzIHRlbXBcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAvL0dyYWIgYWxsIGVsZW1lbnRzXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2ltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuXG4gICAgLy9TZXRzIExpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvL1NldHMgY2FyZCB2YWx1ZXNcbiAgICB0aGlzLl9pbWFnZUVsLnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLl9pbWFnZUVsLmFsdCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl90aXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIGlmICh0aGlzLl9pbml0aWFsU3RhdGUpIHtcbiAgICAgIHRoaXMuc2V0TGlrZUJ0blN0YXRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCIvL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWwpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JNZXNzYWdlQ2xhc3NWaXNpYmxlKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JNZXNzYWdlQ2xhc3NWaXNpYmxlKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2FsbElucHV0c1ZhbGlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHJldHVybiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5fYWxsSW5wdXRzVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vRGlzYWJsZSBTdGF0ZSBvZiBidXR0b25cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBjbGVhclZhbGlkYXRpb25FcnJvcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vTmVlZCB0byBjcmVhdGUgdGhlIHJlbmRlcmVyIGZ1bmN0aW9uXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICAvL3JlbmRlcnMgYWxsIGVsZW1lbnRzIG9uIHRoZSBzY3JlZW5cbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAvL3JlbmRlcmVyIHJlbmRlcnMgZWFjaCBpbmRpdmlkdWFsIGVsZW1lbnRcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAvL0FkZHMgaXQgdG8gdGhlIGNvbnRhaW5lclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgIC8vQWxsb3dzIHRoZSBvdmVybGF5IGFuZCBjbG9zZSBidXR0b24gdG8gY2xvc2UgdGhlIG1vZGFsXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcbiAgICB0aGlzLl9mb3JtRWwgPSB0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faXRlbVwiKSk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB2YWx1ZXNbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnRuVGV4dDtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKGUsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwudmFsdWUgPSBkYXRhW2lucHV0RWwubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbC5yZXNldCgpO1xuICB9XG59XG4iLCIvL1xuXG4vL0NTU1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuLy9KYXZhc2NyaXB0XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRvckNvbmZpZywgZm9ybU5hbWVzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG4vKioqKioqKioqKioqXG4gKiBFTEVNRU5UUyAqXG4gKioqKioqKioqKioqL1xuLy9Qcm9maWxlIGVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyXCIpO1xuLy9jYXJkIGVsZW1lbnRzXG5jb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XG5cbi8qKioqKioqKioqKioqKioqKipcbiAqIEZPUk0gVkFMSURBVE9SUyAqXG4gKioqKioqKioqKioqKioqKioqL1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuLy9HcmFicyBhbGwgZm9ybSBuYW1lc1xuY29uc3QgeyBwcm9maWxlRm9ybU5hbWUsIGF2YXRhckZvcm1OYW1lLCBjYXJkRm9ybU5hbWUgfSA9IGZvcm1OYW1lcztcblxuLy9FbmFibGVzIHZhbGlkYXRpb24gZm9yIGVhY2ggZm9ybVxuLy9BZGRzIHZhbGlkYXRvcnMgdG8gZm9ybVZhbGlkYXRvcnMgb2JqZWN0XG4vL0VuYWJsZXMgdmFsaWRhdGlvbiBmb3IgZWFjaCBmb3JtXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRvckNvbmZpZyk7XG5cbi8qKioqKioqXG4gKiBBUEkgKlxuICoqKioqKiovXG5jb25zdCB0b2tlbiA9IFwiYzJiMGZiOGYtNWUyYy00NWQzLTllNDAtYmJlNDg5MDViNDQ2XCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiB0b2tlbixcbiAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vKioqKioqKioqKioqXG4gKiBTRUNUSU9OUyAqXG4gKioqKioqKioqKioqL1xubGV0IGNhcmRTZWN0aW9uO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgeyBpdGVtczogcmVzdWx0LCByZW5kZXJlcjogY3JlYXRlTmV3Q2FyZEVsIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goY2F0Y2hGZXRjaEVycm9yKTtcblxuLyoqKioqKioqKipcbiAqIFBPUFVQUyAqXG4gKioqKioqKioqKi9cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2FyZC1hZGQtbW9kYWxcIixcbiAgaGFuZGxlQWRkQ2FyZE1vZGFsU3VibWl0XG4pO1xuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhdmF0YXItbW9kYWxcIiwgaGFuZGxlQXZhdGFyTW9kYWxTdWJtaXQpO1xuY29uc3QgcGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtbW9kYWxcIik7XG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKFxuICBcIiNjYXJkLWRlbGV0ZS1tb2RhbFwiLFxuICBoYW5kbGVQb3B1cEJ1dHRvbkNsaWNrXG4pO1xuXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBpY3R1cmVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qKioqKioqKioqKipcbiAqIFVTRVJJTkZPICpcbiAqKioqKioqKioqKiovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLXRpdGxlXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiI3Byb2ZpbGUtaW1hZ2VcIixcbn0pO1xuXG5hcGlcbiAgLmdldEN1cnJlbnRVc2VyKClcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdC5uYW1lLCByZXN1bHQuYWJvdXQpO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXN1bHQuYXZhdGFyKTtcbiAgfSlcbiAgLmNhdGNoKGNhdGNoRmV0Y2hFcnJvcik7XG5cbi8qKioqKioqKioqKioqKioqKipcbiAqIEVWRU5UIEhBTkRMRVJTICpcbiAqKioqKioqKioqKioqKioqKiovXG4vL0RlZmF1bHQgUG9wdXAgU3VibWl0IEZ1bmN0aW9uXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXQocmVxdWVzdCwgcG9wdXBJbnN0YW5jZSkge1xuICBwb3B1cEluc3RhbmNlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIHJlcXVlc3QoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwSW5zdGFuY2UuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChjYXRjaEZldGNoRXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBJbnN0YW5jZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLy9BZGRzIHNwZWNpZmljcyB0byB0aGUgcG9wdXAgc3VibWl0IGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBwb3B1cFxuLy9Qcm9maWxlIFBvcHVwIFN1Ym1pdCBIYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChlLCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnVwZGF0ZVVzZXIobmFtZSwgZGVzY3JpcHRpb24pLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgcHJvZmlsZVBvcHVwKTtcbn1cbi8vQWRkIENhcmQgUG9wdXAgU3VibWl0IEhhbmRsZXJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRNb2RhbFN1Ym1pdChlLCBjYXJkRGF0YSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGkuY3JlYXRlQ2FyZChjYXJkRGF0YS5uYW1lLCBjYXJkRGF0YS5saW5rKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNhcmREYXRhLl9pZCA9IHJlc3VsdC5faWQ7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZU5ld0NhcmRFbChjYXJkRGF0YSkpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgYWRkQ2FyZFBvcHVwKTtcbn1cbi8vQXZhdGFyIFBvcHVwIFN1Ym1pdCBIYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJNb2RhbFN1Ym1pdChlLCB7IGxpbmsgfSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGkudXBkYXRlQXZhdGFyKGxpbmspLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKGxpbmspO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgYXZhdGFyUG9wdXApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soY2FyZE9iamVjdCkge1xuICBwaWN0dXJlUG9wdXAub3BlbihjYXJkT2JqZWN0LmxpbmssIGNhcmRPYmplY3QubmFtZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ0bkNsaWNrKGNhbGxlZE9iaikge1xuICBkZWxldGVDYXJkUG9wdXAub3BlbihjYWxsZWRPYmopO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb3B1cEJ1dHRvbkNsaWNrKGNhbGxlZE9iaikge1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZChjYWxsZWRPYmouaWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FsbGVkT2JqLmhhbmRsZURlbGV0ZSgpO1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY2F0Y2hGZXRjaEVycm9yKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ0bkNsaWNrKGNhbGxlZE9iaikge1xuICBpZiAoIWNhbGxlZE9iai5pc0xpa2VkKCkpIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYWxsZWRPYmouaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhbGxlZE9iai5zZXRMaWtlQnRuU3RhdGUoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY2F0Y2hGZXRjaEVycm9yKTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5kaXNsaWtlQ2FyZChjYWxsZWRPYmouaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhbGxlZE9iai5zZXRMaWtlQnRuU3RhdGUoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY2F0Y2hGZXRjaEVycm9yKTtcbiAgfVxufVxuLyoqKioqKioqKioqKipcbiAqIEZVTkNUSU9OUyAqXG4gKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZEVsKGNhcmREYXRhKSB7XG4gIC8vQ3JlYXRlcyBuZXcgY2FyZCBPYmplY3QgYW5kIHRoZW4gcmV0dXJucyBpdHMgZWxlbWVudFxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVEZWxldGVCdG5DbGljayxcbiAgICBoYW5kbGVMaWtlQnRuQ2xpY2tcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbn1cblxuZnVuY3Rpb24gY2F0Y2hGZXRjaEVycm9yKGVycikge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKlxuICogRVZFTlQgTElTVEVORVJTICpcbiAqKioqKioqKioqKioqKioqKioqL1xuLy9PcGVuIE1vZGFsc1xucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzW3Byb2ZpbGVGb3JtTmFtZV0uc2V0QnV0dG9uU3RhdGUoKTtcbiAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUZvcm1OYW1lXS5jbGVhclZhbGlkYXRpb25FcnJvcnMoKTtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tjYXJkRm9ybU5hbWVdLnNldEJ1dHRvblN0YXRlKCk7XG4gIGZvcm1WYWxpZGF0b3JzW2NhcmRGb3JtTmFtZV0uY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcbnByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbYXZhdGFyRm9ybU5hbWVdLnNldEJ1dHRvblN0YXRlKCk7XG4gIGZvcm1WYWxpZGF0b3JzW2F2YXRhckZvcm1OYW1lXS5jbGVhclZhbGlkYXRpb25FcnJvcnMoKTtcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKlxuICogRU5BQkxFUyBUUkFOU0lUSU9OUyAqXG4gKioqKioqKioqKioqKioqKioqKioqKiovXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwibm8tdHJhbnNpdGlvblwiKTtcbiIsIi8vXG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhcmdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgdmFsaWRhdG9yQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pdGVtXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGVycm9yTWVzc2FnZUNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pdGVtX3R5cGVfZXJyb3JcIixcbiAgZXJyb3JNZXNzYWdlQ2xhc3NWaXNpYmxlOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBmb3JtTmFtZXMgPSB7XG4gIHByb2ZpbGVGb3JtTmFtZTogXCJwcm9maWxlLW1vZGFsLWZvcm1cIixcbiAgYWRkQ2FyZEZvcm1OYW1lOiBcImNhcmQtYWRkLW1vZGFsLWZvcm1cIixcbiAgYXZhdGFyRm9ybU5hbWU6IFwiYXZhdGFyLW1vZGFsLWZvcm1cIixcbn07XG5cbmV4cG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdG9yQ29uZmlnLCBmb3JtTmFtZXMgfTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgX3JlcXVlc3QodXJsLCBtZXRob2QsIGJvZHkpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIC8vR2V0cyB0aGUgaW5pdGlhbCBjYXJkc1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXCJHRVRcIikudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgLy9HZXRzIHRoZSBjdXJyZW50IHVzZXIncyBpbmZvXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCBcIkdFVFwiKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VyKG5hbWUsIGFib3V0KSB7XG4gICAgLy9VcGRhdGVzIHVzZXIgaW5mb3JtYXRpb25cbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIFwiUEFUQ0hcIiwge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFib3V0OiBhYm91dCxcbiAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoYXZhdGFyVXJsKSB7XG4gICAgLy9VcGRhdGVzIHRoZSBjdXJyZW50IHVzZXIncyBhdmF0YXJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCBcIlBBVENIXCIsIHtcbiAgICAgIGF2YXRhcjogYXZhdGFyVXJsLFxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xuICAgIC8vQWRkaW5nIGEgbmV3IGNhcmRcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIFwiUE9TVFwiLCB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbGluazogbGluayxcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgLy9EZWxldGVzIGEgY2FyZFxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIFwiREVMRVRFXCIpLnRoZW4oXG4gICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIC8vTGlrZXMgYSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwgXCJQVVRcIikudGhlbihcbiAgICAgIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgLy9EaXNsaWtlcyBhIGNhcmRcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsXG4gICAgICBcIkRFTEVURVwiXG4gICAgKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BpY3R1cmVFbCA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbkVsID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oaW1hZ2VTcmMsIG5hbWUpIHtcbiAgICB0aGlzLl9waWN0dXJlRWwuc3JjID0gaW1hZ2VTcmM7XG4gICAgdGhpcy5fcGljdHVyZUVsLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbkVsLmlubmVyVGV4dCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVCdXR0b25DbGljaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUJ1dHRvbkNsaWNrID0gaGFuZGxlQnV0dG9uQ2xpY2s7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQnV0dG9uQ2xpY2sodGhpcy5fY2FsbGVkRWwpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbihjYWxsZWRFbCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9jYWxsZWRFbCA9IGNhbGxlZEVsO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9jYWxsZWRFbCA9IG51bGw7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fbmFtZUVsLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdGhpcy5fZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9hdmF0YXIgPSB0aGlzLl9hdmF0YXJFbC5zcmM7XG4gIH1cblxuICBfc2V0UGFnZSgpIHtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gdGhpcy5fZGVzY3JpcHRpb247XG4gICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9hdmF0YXJFbC5zcmMgPSB0aGlzLl9hdmF0YXI7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lLCBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24gfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9zZXRQYWdlKCk7XG4gIH1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICAgIHRoaXMuX3NldFBhZ2UoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnRuQ2xpY2siLCJoYW5kbGVMaWtlQnRuQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiaWQiLCJfaW5pdGlhbFN0YXRlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ0bkNsaWNrIiwiX2hhbmRsZUxpa2VCdG5DbGljayIsInNldExpa2VCdG5TdGF0ZSIsIl9saWtlQnRuIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJoYW5kbGVEZWxldGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ0biIsIl9pbWFnZUVsIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl90aXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsIiwiX2NvbmZpZyIsIl9mb3JtRWwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvck1lc3NhZ2VDbGFzc1Zpc2libGUiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja1ZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9hbGxJbnB1dHNWYWxpZCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3N1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzZXRCdXR0b25TdGF0ZSIsImNsZWFyVmFsaWRhdGlvbkVycm9ycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbCIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIkFycmF5IiwiZnJvbSIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsInZhbHVlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVBdmF0YXIiLCJhZGRDYXJkQnRuIiwiZm9ybVZhbGlkYXRvcnMiLCJwcm9maWxlRm9ybU5hbWUiLCJhdmF0YXJGb3JtTmFtZSIsImNhcmRGb3JtTmFtZSIsImFkZENhcmRGb3JtTmFtZSIsImZvcm1TZWxlY3RvciIsImVycm9yTWVzc2FnZUNsYXNzIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJmZXRjaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwicmVzdWx0IiwiZ2V0Q3VycmVudFVzZXIiLCJ1cGRhdGVVc2VyIiwiYWJvdXQiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY3JlYXRlTmV3Q2FyZEVsIiwiY2F0Y2giLCJjYXRjaEZldGNoRXJyb3IiLCJwcm9maWxlUG9wdXAiLCJkZXNjcmlwdGlvbiIsImhhbmRsZVN1Ym1pdCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhZGRDYXJkUG9wdXAiLCJjYXJkRGF0YSIsImF2YXRhclBvcHVwIiwiX3JlZjIiLCJzZXRBdmF0YXIiLCJwaWN0dXJlUG9wdXAiLCJfcGljdHVyZUVsIiwiX2NhcHRpb25FbCIsImltYWdlU3JjIiwiaW5uZXJUZXh0IiwiZGVsZXRlQ2FyZFBvcHVwIiwiaGFuZGxlQnV0dG9uQ2xpY2siLCJfaGFuZGxlQnV0dG9uQ2xpY2siLCJfYnV0dG9uIiwiX2NhbGxlZEVsIiwiY2FsbGVkRWwiLCJjYWxsZWRPYmoiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsIiwiX2Rlc2NyaXB0aW9uRWwiLCJfYXZhdGFyRWwiLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsIl9hdmF0YXIiLCJfc2V0UGFnZSIsImdldFVzZXJJbmZvIiwicmVxdWVzdCIsInBvcHVwSW5zdGFuY2UiLCJmaW5hbGx5IiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZE9iamVjdCIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=