!function(){"use strict";class t{constructor(t,e,s,i,r){let{name:n,link:a,_id:o,isLiked:l}=t;this.name=n,this.link=a,this.id=o,this._initialState=l,this._cardSelector=e,this._handleImageClick=s,this._handleDeleteBtnClick=i,this._handleLikeBtnClick=r}setLikeBtnState=()=>{this._likeBtn.classList.toggle("card__like-button_active")};isLiked=()=>this._likeBtn.classList.contains("card__like-button_active");handleDelete=()=>{this._cardElement.remove(),this._cardElement=null};_setEventListeners(){this._likeBtn.addEventListener("click",(()=>{this._handleLikeBtnClick(this)})),this._deleteBtn.addEventListener("click",(()=>{this._handleDeleteBtnClick(this)})),this._imageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._imageEl=this._cardElement.querySelector(".card__image"),this._titleEl=this._cardElement.querySelector(".card__title"),this._setEventListeners(),this._imageEl.src=this.link,this._imageEl.alt=this.name,this._titleEl.textContent=this.name,this._initialState&&this.setLikeBtnState(),this._cardElement}}class e{constructor(t,e){this._config=t,this._formEl=e}_showInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.add(this._config.inputErrorClass),e.classList.add(this._config.errorMessageClassVisible),e.textContent=t.validationMessage}_hideInputError(t){this._formEl.querySelector(`#${t.id}-error`).classList.remove(this._config.errorMessageClassVisible),t.classList.remove(this._config.inputErrorClass)}_checkValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_allInputsValid(){return this._inputEls.every((t=>t.validity.valid))}_toggleButtonState(){this._allInputsValid()?(this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.removeAttribute("disabled")):(this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.setAttribute("disabled",!0))}_setEventListeners(){this._submitButton=this._formEl.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach((t=>{t.addEventListener("input",(e=>{this._checkValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(t=>{t.preventDefault()})),this._inputEls=[...this._formEl.querySelectorAll(this._config.inputSelector)],this._setEventListeners()}setButtonState(){this._toggleButtonState()}clearValidationErrors(){this._inputEls.forEach((t=>{this._hideInputError(t)}))}}class s{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this.addItem(this._renderer(t))}))}addItem(t){this._container.insertAdjacentElement("afterbegin",t)}}class i{constructor(t){this._popupEl=document.querySelector(t)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};open(){this._popupEl.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupEl.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupEl.addEventListener("mousedown",(t=>{(t.target.classList.contains("modal_opened")||t.target.classList.contains("modal__close"))&&this.close()}))}}class r extends i{constructor(t,e){super(t),this._handleSubmitForm=e,this._formEl=this._popupEl.querySelector(".modal__form"),this._inputEls=Array.from(this._popupEl.querySelectorAll(".modal__item")),this._submitBtn=this._popupEl.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const t={};return this._inputEls.forEach((e=>{t[e.name]=e.value})),t}renderLoading(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=t?e:this._submitBtnText}setEventListeners(){super.setEventListeners(),this._formEl.addEventListener("submit",(t=>{this._handleSubmitForm(t,this._getInputValues())}))}setInputValues(t){this._inputEls.forEach((e=>{e.value=t[e.name]}))}close(){super.close(),this._formEl.reset()}}const n=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar"),o=document.querySelector("#add-card-button"),l={},{profileFormName:c,avatarFormName:d,addCardFormName:h}={profileFormName:"profile-modal-form",addCardFormName:"card-modal-form",avatarFormName:"avatar-modal-form"};var _;console.log(c,d,h),_={formSelector:".modal__form",inputSelector:".modal__item",submitButtonSelector:".modal__button",errorMessageClass:"modal__error",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__item_type_error",errorMessageClassVisible:"modal__error_visible"},Array.from(document.querySelectorAll(_.formSelector)).forEach((t=>{const s=new e(_,t),i=t.getAttribute("name");l[i]=s,s.enableValidation()}));const u=new class{constructor(t){this._baseUrl=t.baseUrl,this._headers=t.headers}_checkResponse(t){return t.ok?t.json():Promise.reject(`Error: ${t.status}`)}_request(t,e,s){return fetch(t,{method:e,headers:this._headers,body:JSON.stringify(s)}).then(this._checkResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,"GET").then((t=>t))}getCurrentUser(){return this._request(`${this._baseUrl}/users/me`,"GET").then((t=>t))}updateUser(t,e){return this._request(`${this._baseUrl}/users/me`,"PATCH",{name:t,about:e}).then((t=>{console.log(t)}))}updateAvatar(t){return this._request(`${this._baseUrl}/users/me/avatar`,"PATCH",{avatar:t}).then((t=>{console.log(t)}))}createCard(t,e){return this._request(`${this._baseUrl}/cards`,"POST",{name:t,link:e})}deleteCard(t){return this._request(`${this._baseUrl}/cards/${t}`,"DELETE").then((t=>{console.log(t)}))}likeCard(t){return this._request(`${this._baseUrl}/cards/${t}/likes`,"PUT").then((t=>{console.log(t)}))}dislikeCard(t){return this._request(`${this._baseUrl}/cards/${t}/likes`,"DELETE").then((t=>{console.log(t)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c2b0fb8f-5e2c-45d3-9e40-bbe48905b446","content-type":"application/json"}});let m;u.getInitialCards().then((t=>{m=new s({items:t,renderer:y},".cards__list"),m.renderItems()})).catch(B);const p=new r("#profile-edit-modal",(function(t,e){let{name:s,description:i}=e;t.preventDefault(),S((function(){return u.updateUser(s,i).then((()=>{b.setUserInfo(s,i)}))}),p)})),E=new r("#card-add-modal",(function(t,e){t.preventDefault(),S((function(){return u.createCard(e.name,e.link).then((t=>{e._id=t._id,m.addItem(y(e))}))}),E)})),v=new r("#avatar-modal",(function(t,e){let{link:s}=e;t.preventDefault(),S((function(){return u.updateAvatar(s).then((()=>{b.setAvatar(s)}))}),v)})),f=new class extends i{constructor(t){super(t),this._pictureEl=this._popupEl.querySelector(".modal__image"),this._captionEl=this._popupEl.querySelector(".modal__title")}open(t,e){this._pictureEl.src=t,this._pictureEl.alt=e,this._captionEl.innerText=e,super.open()}}("#picture-modal"),g=new class extends i{constructor(t,e){super(t),this._handleButtonClick=e,this._button=this._popupEl.querySelector(".modal__button")}setEventListeners(){super.setEventListeners(),this._button.addEventListener("click",(()=>{this._handleButtonClick(this._calledEl)}))}open(t){super.open(),this._calledEl=t}close(){super.close(),this._calledEl=null}}("#card-delete-modal",(function(t){u.deleteCard(t.id).then((()=>{t.handleDelete(),g.close()})).catch(B)}));p.setEventListeners(),E.setEventListeners(),v.setEventListeners(),f.setEventListeners(),g.setEventListeners();const b=new class{constructor(t){let{nameSelector:e,descriptionSelector:s,avatarSelector:i}=t;this._nameEl=document.querySelector(e),this._descriptionEl=document.querySelector(s),this._avatarEl=document.querySelector(i),this._name=this._nameEl.textContent,this._description=this._descriptionEl.textContent,this._avatar=this._avatarEl.src}_setPage(){this._descriptionEl.textContent=this._description,this._nameEl.textContent=this._name,this._avatarEl.src=this._avatar}getUserInfo(){return{name:this._name,description:this._description}}setUserInfo(t,e){this._name=t,this._description=e,this._setPage()}setAvatar(t){this._avatar=t,this._setPage()}}({nameSelector:"#profile-title",descriptionSelector:"#profile-description",avatarSelector:"#profile-image"});function S(t,e){e.renderLoading(!0),t().then((()=>{e.close()})).catch(B).finally((()=>{e.renderLoading(!1)}))}function L(t){f.open(t.link,t.name)}function k(t){g.open(t)}function C(t){t.isLiked()?u.dislikeCard(t.id).then((()=>{t.setLikeBtnState()})).catch(B):u.likeCard(t.id).then((()=>{t.setLikeBtnState()})).catch(B)}function y(e){return new t(e,"#card-template",L,k,C).getView()}function B(t){console.log(t)}u.getCurrentUser().then((t=>{b.setUserInfo(t.name,t.about),b.setAvatar(t.avatar)})).catch(B),n.addEventListener("click",(()=>{p.setInputValues(b.getUserInfo()),l[c].setButtonState(),l[c].clearValidationErrors(),p.open()})),o.addEventListener("click",(()=>{l[h].setButtonState(),l[h].clearValidationErrors(),E.open()})),a.addEventListener("click",(()=>{l[d].setButtonState(),l[d].clearValidationErrors(),v.open()})),document.querySelector("body").classList.remove("no-transition")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckJBLEVBQVVwTCxVQVFid0gsRUFDR2lDLFlBQVkyQixFQUFVbEwsSUFDdEIwSSxNQUFLLEtBQ0p3QyxFQUFVNUssaUJBQWlCLElBRTVCcUosTUFBTUMsR0FaVHRDLEVBQ0dnQyxTQUFTNEIsRUFBVWxMLElBQ25CMEksTUFBSyxLQUNKd0MsRUFBVTVLLGlCQUFpQixJQUU1QnFKLE1BQU1DLEVBU2IsQ0FLQSxTQUFTRixFQUFnQlMsR0FTdkIsT0FQYSxJQUFJL0ssRUFDZitLLEVBQ0EsaUJBQ0E4QixFQUNBeE0sRUFDQUMsR0FFVXdCLFNBQ2QsQ0FNQSxTQUFTMEksRUFBZ0J1QyxHQUN2QnJGLFFBQVFDLElBQUlvRixFQUNkLENBbEhBN0UsRUFDR3VCLGlCQUNBSCxNQUFNRSxJQUNMb0IsRUFBU0MsWUFBWXJCLEVBQU9qSixLQUFNaUosRUFBT0csT0FDekNpQixFQUFTTSxVQUFVMUIsRUFBT00sT0FBTyxJQUVsQ1MsTUFBTUMsR0FrSFRyRCxFQUFleEYsaUJBQWlCLFNBQVMsS0FYdkM4SSxFQUFhekQsZUFBZTRELEVBQVM2QixlQWFyQ25GLEVBQWVDLEdBQWlCaEQsaUJBQ2hDK0MsRUFBZUMsR0FBaUIvQyx3QkFDaENpRyxFQUFhOUUsTUFBTSxJQUVyQjBCLEVBQVcxRixpQkFBaUIsU0FBUyxLQUNuQzJGLEVBQWVHLEdBQWlCbEQsaUJBQ2hDK0MsRUFBZUcsR0FBaUJqRCx3QkFDaENzRyxFQUFhbkYsTUFBTSxJQUVyQnlCLEVBQWN6RixpQkFBaUIsU0FBUyxLQUN0QzJGLEVBQWVFLEdBQWdCakQsaUJBQy9CK0MsRUFBZUUsR0FBZ0JoRCx3QkFDL0J3RyxFQUFZckYsTUFBTSxJQU1wQjVELFNBQVNDLGNBQWMsUUFBUVosVUFBVUssT0FBTyxnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVCdG5DbGljayxcbiAgICBoYW5kbGVMaWtlQnRuQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMuaWQgPSBfaWQ7XG4gICAgdGhpcy5faW5pdGlhbFN0YXRlID0gaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuQ2xpY2sgPSBoYW5kbGVEZWxldGVCdG5DbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnRuQ2xpY2sgPSBoYW5kbGVMaWtlQnRuQ2xpY2s7XG4gIH1cblxuICBzZXRMaWtlQnRuU3RhdGUgPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9O1xuXG4gIGlzTGlrZWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9O1xuXG4gIGhhbmRsZURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vQWRkcyBsaXN0ZW5lcnNcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnRuQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9pbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICAvL2Nsb25lcyB0ZW1wXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgLy9HcmFiIGFsbCBlbGVtZW50c1xuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9pbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl90aXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcblxuICAgIC8vU2V0cyBMaXN0ZW5lcnNcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy9TZXRzIGNhcmQgdmFsdWVzXG4gICAgdGhpcy5faW1hZ2VFbC5zcmMgPSB0aGlzLmxpbms7XG4gICAgdGhpcy5faW1hZ2VFbC5hbHQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5fdGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICBpZiAodGhpcy5faW5pdGlhbFN0YXRlKSB7XG4gICAgICB0aGlzLnNldExpa2VCdG5TdGF0ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiLy9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yTWVzc2FnZUNsYXNzVmlzaWJsZSk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yTWVzc2FnZUNsYXNzVmlzaWJsZSk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9hbGxJbnB1dHNWYWxpZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICByZXR1cm4gaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2FsbElucHV0c1ZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2V0QnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvL0Rpc2FibGUgU3RhdGUgb2YgYnV0dG9uXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvL05lZWQgdG8gY3JlYXRlIHRoZSByZW5kZXJlciBmdW5jdGlvblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgLy9yZW5kZXJzIGFsbCBlbGVtZW50cyBvbiB0aGUgc2NyZWVuXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgLy9yZW5kZXJlciByZW5kZXJzIGVhY2ggaW5kaXZpZHVhbCBlbGVtZW50XG4gICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgLy9BZGRzIGl0IHRvIHRoZSBjb250YWluZXJcbiAgICB0aGlzLl9jb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICAvL0FsbG93cyB0aGUgb3ZlcmxheSBhbmQgY2xvc2UgYnV0dG9uIHRvIGNsb3NlIHRoZSBtb2RhbFxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XG4gICAgdGhpcy5fZm9ybUVsID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2l0ZW1cIikpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdmFsdWVzW2lucHV0RWwubmFtZV0gPSBpbnB1dEVsLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybShlLCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLnZhbHVlID0gZGF0YVtpbnB1dEVsLm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWwucmVzZXQoKTtcbiAgfVxufVxuIiwiLy9cblxuLy9DU1NcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vSmF2YXNjcmlwdFxuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0b3JDb25maWcsIGZvcm1OYW1lcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuLyoqKioqKioqKioqKlxuICogRUxFTUVOVFMgKlxuICoqKioqKioqKioqKi9cbi8vUHJvZmlsZSBlbGVtZW50c1xuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhclwiKTtcbi8vY2FyZCBlbGVtZW50c1xuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtYnV0dG9uXCIpO1xuXG4vKioqKioqKioqKioqKioqKioqXG4gKiBGT1JNIFZBTElEQVRPUlMgKlxuICoqKioqKioqKioqKioqKioqKi9cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbi8vR3JhYnMgYWxsIGZvcm0gbmFtZXNcbmNvbnN0IHsgcHJvZmlsZUZvcm1OYW1lLCBhdmF0YXJGb3JtTmFtZSwgYWRkQ2FyZEZvcm1OYW1lIH0gPSBmb3JtTmFtZXM7XG5cbmNvbnNvbGUubG9nKHByb2ZpbGVGb3JtTmFtZSwgYXZhdGFyRm9ybU5hbWUsIGFkZENhcmRGb3JtTmFtZSk7XG5cbi8vRW5hYmxlcyB2YWxpZGF0aW9uIGZvciBlYWNoIGZvcm1cbi8vQWRkcyB2YWxpZGF0b3JzIHRvIGZvcm1WYWxpZGF0b3JzIG9iamVjdFxuLy9FbmFibGVzIHZhbGlkYXRpb24gZm9yIGVhY2ggZm9ybVxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0b3JDb25maWcpO1xuXG4vKioqKioqKlxuICogQVBJICpcbiAqKioqKioqL1xuY29uc3QgdG9rZW4gPSBcImMyYjBmYjhmLTVlMmMtNDVkMy05ZTQwLWJiZTQ4OTA1YjQ0NlwiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogdG9rZW4sXG4gICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLyoqKioqKioqKioqKlxuICogU0VDVElPTlMgKlxuICoqKioqKioqKioqKi9cbmxldCBjYXJkU2VjdGlvbjtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgIHsgaXRlbXM6IHJlc3VsdCwgcmVuZGVyZXI6IGNyZWF0ZU5ld0NhcmRFbCB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKGNhdGNoRmV0Y2hFcnJvcik7XG5cbi8qKioqKioqKioqXG4gKiBQT1BVUFMgKlxuICoqKioqKioqKiovXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XG4pO1xuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2NhcmQtYWRkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRNb2RhbFN1Ym1pdFxuKTtcbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLW1vZGFsXCIsIGhhbmRsZUF2YXRhck1vZGFsU3VibWl0KTtcbmNvbnN0IHBpY3R1cmVQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwaWN0dXJlLW1vZGFsXCIpO1xuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwQ29uZmlybShcbiAgXCIjY2FyZC1kZWxldGUtbW9kYWxcIixcbiAgaGFuZGxlUG9wdXBCdXR0b25DbGlja1xuKTtcblxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5waWN0dXJlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKioqKioqKioqKioqXG4gKiBVU0VSSU5GTyAqXG4gKioqKioqKioqKioqL1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIiNwcm9maWxlLWltYWdlXCIsXG59KTtcblxuYXBpXG4gIC5nZXRDdXJyZW50VXNlcigpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQubmFtZSwgcmVzdWx0LmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzdWx0LmF2YXRhcik7XG4gIH0pXG4gIC5jYXRjaChjYXRjaEZldGNoRXJyb3IpO1xuXG4vKioqKioqKioqKioqKioqKioqXG4gKiBFVkVOVCBIQU5ETEVSUyAqXG4gKioqKioqKioqKioqKioqKioqL1xuLy9EZWZhdWx0IFBvcHVwIFN1Ym1pdCBGdW5jdGlvblxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIHBvcHVwSW5zdGFuY2UpIHtcbiAgcG9wdXBJbnN0YW5jZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICByZXF1ZXN0KClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cEluc3RhbmNlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY2F0Y2hGZXRjaEVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwSW5zdGFuY2UucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8vQWRkcyBzcGVjaWZpY3MgdG8gdGhlIHBvcHVwIHN1Ym1pdCBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgcG9wdXBcbi8vUHJvZmlsZSBQb3B1cCBTdWJtaXQgSGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZSwgeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIGFwaS51cGRhdGVVc2VyKG5hbWUsIGRlc2NyaXB0aW9uKS50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIHByb2ZpbGVQb3B1cCk7XG59XG4vL0FkZCBDYXJkIFBvcHVwIFN1Ym1pdCBIYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkTW9kYWxTdWJtaXQoZSwgY2FyZERhdGEpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLmNyZWF0ZUNhcmQoY2FyZERhdGEubmFtZSwgY2FyZERhdGEubGluaykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBjYXJkRGF0YS5faWQgPSByZXN1bHQuX2lkO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVOZXdDYXJkRWwoY2FyZERhdGEpKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGFkZENhcmRQb3B1cCk7XG59XG4vL0F2YXRhciBQb3B1cCBTdWJtaXQgSGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyTW9kYWxTdWJtaXQoZSwgeyBsaW5rIH0pIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnVwZGF0ZUF2YXRhcihsaW5rKS50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihsaW5rKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGF2YXRhclBvcHVwKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGNhcmRPYmplY3QpIHtcbiAgcGljdHVyZVBvcHVwLm9wZW4oY2FyZE9iamVjdC5saW5rLCBjYXJkT2JqZWN0Lm5hbWUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdG5DbGljayhjYWxsZWRPYmopIHtcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oY2FsbGVkT2JqKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUG9wdXBCdXR0b25DbGljayhjYWxsZWRPYmopIHtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoY2FsbGVkT2JqLmlkKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNhbGxlZE9iai5oYW5kbGVEZWxldGUoKTtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNhdGNoRmV0Y2hFcnJvcik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VCdG5DbGljayhjYWxsZWRPYmopIHtcbiAgaWYgKCFjYWxsZWRPYmouaXNMaWtlZCgpKSB7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQoY2FsbGVkT2JqLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYWxsZWRPYmouc2V0TGlrZUJ0blN0YXRlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNhdGNoRmV0Y2hFcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAuZGlzbGlrZUNhcmQoY2FsbGVkT2JqLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYWxsZWRPYmouc2V0TGlrZUJ0blN0YXRlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNhdGNoRmV0Y2hFcnJvcik7XG4gIH1cbn1cbi8qKioqKioqKioqKioqXG4gKiBGVU5DVElPTlMgKlxuICoqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmRFbChjYXJkRGF0YSkge1xuICAvL0NyZWF0ZXMgbmV3IGNhcmQgT2JqZWN0IGFuZCB0aGVuIHJldHVybnMgaXRzIGVsZW1lbnRcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQnRuQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUJ0bkNsaWNrXG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xuICBwcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG59XG5cbmZ1bmN0aW9uIGNhdGNoRmV0Y2hFcnJvcihlcnIpIHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKipcbiAqIEVWRU5UIExJU1RFTkVSUyAqXG4gKioqKioqKioqKioqKioqKioqKi9cbi8vT3BlbiBNb2RhbHNcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRm9ybU5hbWVdLnNldEJ1dHRvblN0YXRlKCk7XG4gIGZvcm1WYWxpZGF0b3JzW3Byb2ZpbGVGb3JtTmFtZV0uY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbYWRkQ2FyZEZvcm1OYW1lXS5zZXRCdXR0b25TdGF0ZSgpO1xuICBmb3JtVmFsaWRhdG9yc1thZGRDYXJkRm9ybU5hbWVdLmNsZWFyVmFsaWRhdGlvbkVycm9ycygpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW2F2YXRhckZvcm1OYW1lXS5zZXRCdXR0b25TdGF0ZSgpO1xuICBmb3JtVmFsaWRhdG9yc1thdmF0YXJGb3JtTmFtZV0uY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKipcbiAqIEVOQUJMRVMgVFJBTlNJVElPTlMgKlxuICoqKioqKioqKioqKioqKioqKioqKioqL1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuY2xhc3NMaXN0LnJlbW92ZShcIm5vLXRyYW5zaXRpb25cIik7XG4iLCIvL1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXJnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHZhbGlkYXRvckNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faXRlbVwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBlcnJvck1lc3NhZ2VDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faXRlbV90eXBlX2Vycm9yXCIsXG4gIGVycm9yTWVzc2FnZUNsYXNzVmlzaWJsZTogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3QgZm9ybU5hbWVzID0ge1xuICBwcm9maWxlRm9ybU5hbWU6IFwicHJvZmlsZS1tb2RhbC1mb3JtXCIsXG4gIGFkZENhcmRGb3JtTmFtZTogXCJjYXJkLW1vZGFsLWZvcm1cIixcbiAgYXZhdGFyRm9ybU5hbWU6IFwiYXZhdGFyLW1vZGFsLWZvcm1cIixcbn07XG5cbmV4cG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdG9yQ29uZmlnLCBmb3JtTmFtZXMgfTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgX3JlcXVlc3QodXJsLCBtZXRob2QsIGJvZHkpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIC8vR2V0cyB0aGUgaW5pdGlhbCBjYXJkc1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXCJHRVRcIikudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgLy9HZXRzIHRoZSBjdXJyZW50IHVzZXIncyBpbmZvXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCBcIkdFVFwiKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VyKG5hbWUsIGFib3V0KSB7XG4gICAgLy9VcGRhdGVzIHVzZXIgaW5mb3JtYXRpb25cbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIFwiUEFUQ0hcIiwge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFib3V0OiBhYm91dCxcbiAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoYXZhdGFyVXJsKSB7XG4gICAgLy9VcGRhdGVzIHRoZSBjdXJyZW50IHVzZXIncyBhdmF0YXJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCBcIlBBVENIXCIsIHtcbiAgICAgIGF2YXRhcjogYXZhdGFyVXJsLFxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xuICAgIC8vQWRkaW5nIGEgbmV3IGNhcmRcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIFwiUE9TVFwiLCB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbGluazogbGluayxcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgLy9EZWxldGVzIGEgY2FyZFxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIFwiREVMRVRFXCIpLnRoZW4oXG4gICAgICAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIC8vTGlrZXMgYSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwgXCJQVVRcIikudGhlbihcbiAgICAgIChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgLy9EaXNsaWtlcyBhIGNhcmRcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsXG4gICAgICBcIkRFTEVURVwiXG4gICAgKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BpY3R1cmVFbCA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbkVsID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oaW1hZ2VTcmMsIG5hbWUpIHtcbiAgICB0aGlzLl9waWN0dXJlRWwuc3JjID0gaW1hZ2VTcmM7XG4gICAgdGhpcy5fcGljdHVyZUVsLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbkVsLmlubmVyVGV4dCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVCdXR0b25DbGljaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUJ1dHRvbkNsaWNrID0gaGFuZGxlQnV0dG9uQ2xpY2s7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQnV0dG9uQ2xpY2sodGhpcy5fY2FsbGVkRWwpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbihjYWxsZWRFbCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9jYWxsZWRFbCA9IGNhbGxlZEVsO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9jYWxsZWRFbCA9IG51bGw7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fbmFtZUVsLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdGhpcy5fZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9hdmF0YXIgPSB0aGlzLl9hdmF0YXJFbC5zcmM7XG4gIH1cblxuICBfc2V0UGFnZSgpIHtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gdGhpcy5fZGVzY3JpcHRpb247XG4gICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9hdmF0YXJFbC5zcmMgPSB0aGlzLl9hdmF0YXI7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lLCBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24gfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9zZXRQYWdlKCk7XG4gIH1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICAgIHRoaXMuX3NldFBhZ2UoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnRuQ2xpY2siLCJoYW5kbGVMaWtlQnRuQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiaWQiLCJfaW5pdGlhbFN0YXRlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ0bkNsaWNrIiwiX2hhbmRsZUxpa2VCdG5DbGljayIsInNldExpa2VCdG5TdGF0ZSIsIl9saWtlQnRuIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJoYW5kbGVEZWxldGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ0biIsIl9pbWFnZUVsIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl90aXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsIiwiX2NvbmZpZyIsIl9mb3JtRWwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvck1lc3NhZ2VDbGFzc1Zpc2libGUiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja1ZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9hbGxJbnB1dHNWYWxpZCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3N1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzZXRCdXR0b25TdGF0ZSIsImNsZWFyVmFsaWRhdGlvbkVycm9ycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbCIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIkFycmF5IiwiZnJvbSIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsInZhbHVlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVBdmF0YXIiLCJhZGRDYXJkQnRuIiwiZm9ybVZhbGlkYXRvcnMiLCJwcm9maWxlRm9ybU5hbWUiLCJhdmF0YXJGb3JtTmFtZSIsImFkZENhcmRGb3JtTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJmb3JtU2VsZWN0b3IiLCJlcnJvck1lc3NhZ2VDbGFzcyIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJib2R5IiwiZmV0Y2giLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsInJlc3VsdCIsImdldEN1cnJlbnRVc2VyIiwidXBkYXRlVXNlciIsImFib3V0IiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY3JlYXRlTmV3Q2FyZEVsIiwiY2F0Y2giLCJjYXRjaEZldGNoRXJyb3IiLCJwcm9maWxlUG9wdXAiLCJkZXNjcmlwdGlvbiIsImhhbmRsZVN1Ym1pdCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhZGRDYXJkUG9wdXAiLCJjYXJkRGF0YSIsImF2YXRhclBvcHVwIiwiX3JlZjIiLCJzZXRBdmF0YXIiLCJwaWN0dXJlUG9wdXAiLCJfcGljdHVyZUVsIiwiX2NhcHRpb25FbCIsImltYWdlU3JjIiwiaW5uZXJUZXh0IiwiZGVsZXRlQ2FyZFBvcHVwIiwiaGFuZGxlQnV0dG9uQ2xpY2siLCJfaGFuZGxlQnV0dG9uQ2xpY2siLCJfYnV0dG9uIiwiX2NhbGxlZEVsIiwiY2FsbGVkRWwiLCJjYWxsZWRPYmoiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsIiwiX2Rlc2NyaXB0aW9uRWwiLCJfYXZhdGFyRWwiLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsIl9hdmF0YXIiLCJfc2V0UGFnZSIsImdldFVzZXJJbmZvIiwicmVxdWVzdCIsInBvcHVwSW5zdGFuY2UiLCJmaW5hbGx5IiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZE9iamVjdCIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=